<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>BookNotes.md—F:\py\self\DataAnalysis</title>
    <style type="text/css">
    html{font-family: sans-serif;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%}body{margin: 0}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display: block}audio,canvas,progress,video{display: inline-block;vertical-align: baseline}audio:not([controls]){display: none;height: 0}[hidden],template{display: none}a{background: transparent}a:active,a:hover{outline: 0}abbr[title]{border-bottom: 1px dotted}b,strong{font-weight: bold}dfn{font-style: italic}h1{font-size: 2em;margin: 0.67em 0}mark{background: #ff0;color: #000}small{font-size: 80%}sub,sup{font-size: 75%;line-height: 0;position: relative;vertical-align: baseline}sup{top: -0.5em}sub{bottom: -0.25em}img{border: 0}svg:not(:root){overflow: hidden}figure{margin: 1em 40px}hr{box-sizing: content-box;height: 0}pre{overflow: auto}code,kbd,pre,samp{font-family: monospace, monospace;font-size: 1em}button,input,optgroup,select,textarea{color: inherit;font: inherit;margin: 0}button{overflow: visible}button,select{text-transform: none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance: button;cursor: pointer}button[disabled],html input[disabled]{cursor: default}button::-moz-focus-inner,input::-moz-focus-inner{border: 0;padding: 0}input{line-height: normal}input[type="checkbox"],input[type="radio"]{box-sizing: border-box;padding: 0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height: auto}input[type="search"]{-webkit-appearance: textfield;box-sizing: content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance: none}fieldset{border: 1px solid #c0c0c0;margin: 0 2px;padding: 0.35em 0.625em 0.75em}legend{border: 0;padding: 0}textarea{overflow: auto}optgroup{font-weight: bold}table{border-collapse: collapse;border-spacing: 0}td,th{padding: 0}*{box-sizing: border-box}input,select,textarea,button{font: 13px/1.4 Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"}body{min-width: 1020px;font: 13px/1.4 Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";color: #333;background-color: #fff}a{color: #4183c4;text-decoration: none}a:hover,a:active{text-decoration: underline}hr,.rule{height: 0;margin: 15px 0;overflow: hidden;background: transparent;border: 0;border-bottom: 1px solid #ddd}hr:before,.rule:before{display: table;content: ""}hr:after,.rule:after{display: table;clear: both;content: ""}h1,h2,h3,h4,h5,h6{margin-top: 15px;margin-bottom: 15px;line-height: 1.1}h1{font-size: 30px}h2{font-size: 21px}h3{font-size: 16px}h4{font-size: 14px}h5{font-size: 12px}h6{font-size: 11px}small{font-size: 90%}blockquote{margin: 0}.lead{margin-bottom: 30px;font-size: 20px;font-weight: 300;color: #555}.text-muted{color: #999}.text-danger{color: #bd2c00}.text-emphasized{font-weight: bold;color: #333}ul,ol{padding: 0;margin-top: 0;margin-bottom: 0}ol ol,ul ol{list-style-type: lower-roman}ul ul ol,ul ol ol,ol ul ol,ol ol ol{list-style-type: lower-alpha}dd{margin-left: 0}tt,code{font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;font-size: 12px}pre{margin-top: 0;margin-bottom: 0;font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace}#realtime .status{overflow: visible;position: absolute;top: -5px;left: 0;background: url("/public/images/github-status.png");width: 26px;height: 26px;display: block;margin: 0 5px 0 0}#realtime .up{background-position: 0 0}#realtime .problem{background-position: 0 -53px}#realtime .down{background-position: 0 -26px}.container{max-width: 920px;margin: 0 auto 20px auto}#header{background: #FAFAFA;background: -moz-linear-gradient(#FAFAFA, #EAEAEA);background: -webkit-linear-gradient(#FAFAFA, #EAEAEA);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#fafafa', endColorstr='#eaeaea')";border-bottom: 1px solid #CACACA;box-shadow: 0 1px 0 rgba(255, 255, 255, 0.4),0 0 10px rgba(0, 0, 0, 0.1)}#markup{padding: 3px}#markup article{padding-top: 30px}.markdown-body{overflow: hidden;font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;font-size: 16px;line-height: 1.6;word-wrap: break-word}.markdown-body>*:first-child{margin-top: 0 !important}.markdown-body>*:last-child{margin-bottom: 0 !important}.markdown-body .absent{color: #c00}.markdown-body .anchor{position: absolute;top: 0;left: 0;display: block;padding-right: 6px;padding-left: 30px;margin-left: -30px}.markdown-body .anchor:focus{outline: none}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position: relative;margin-top: 1em;margin-bottom: 16px;font-weight: bold;line-height: 1.4}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{display: none;color: #000;vertical-align: middle}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{padding-left: 8px;margin-left: -30px;text-decoration: none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{display: inline-block}.markdown-body h1 tt,.markdown-body h1 code,.markdown-body h2 tt,.markdown-body h2 code,.markdown-body h3 tt,.markdown-body h3 code,.markdown-body h4 tt,.markdown-body h4 code,.markdown-body h5 tt,.markdown-body h5 code,.markdown-body h6 tt,.markdown-body h6 code{font-size: inherit}.markdown-body h1{padding-bottom: 0.3em;font-size: 2.25em;line-height: 1.2;border-bottom: 1px solid #eee}.markdown-body h1 .anchor{line-height: 1}.markdown-body h2{padding-bottom: 0.3em;font-size: 1.75em;line-height: 1.225;border-bottom: 1px solid #eee}.markdown-body h2 .anchor{line-height: 1}.markdown-body h3{font-size: 1.5em;line-height: 1.43}.markdown-body h3 .anchor{line-height: 1.2}.markdown-body h4{font-size: 1.25em}.markdown-body h4 .anchor{line-height: 1.2}.markdown-body h5{font-size: 1em}.markdown-body h5 .anchor{line-height: 1.1}.markdown-body h6{font-size: 1em;color: #777}.markdown-body h6 .anchor{line-height: 1.1}.markdown-body p,.markdown-body blockquote,.markdown-body ul,.markdown-body ol,.markdown-body dl,.markdown-body table,.markdown-body pre{margin-top: 0;margin-bottom: 16px}.markdown-body hr{height: 4px;padding: 0;margin: 16px 0;background-color: #e7e7e7;border: 0 none}.markdown-body ul,.markdown-body ol{padding-left: 2em}.markdown-body ul.no-list,.markdown-body ol.no-list{padding: 0;list-style-type: none}.markdown-body ul ul,.markdown-body ul ol,.markdown-body ol ol,.markdown-body ol ul{margin-top: 0;margin-bottom: 0}.markdown-body li>p{margin-top: 16px}.markdown-body dl{padding: 0}.markdown-body dl dt{padding: 0;margin-top: 16px;font-size: 1em;font-style: italic;font-weight: bold}.markdown-body dl dd{padding: 0 16px;margin-bottom: 16px}.markdown-body blockquote{padding: 0 15px;color: #777;border-left: 4px solid #ddd}.markdown-body blockquote>:first-child{margin-top: 0}.markdown-body blockquote>:last-child{margin-bottom: 0}.markdown-body table{display: block;width: 100%;overflow: auto;word-break: normal;word-break: keep-all}.markdown-body table th{font-weight: bold}.markdown-body table th,.markdown-body table td{padding: 6px 13px;border: 1px solid #ddd}.markdown-body table tr{background-color: #fff;border-top: 1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color: #f8f8f8}.markdown-body img{max-width: 100%;box-sizing: border-box}.markdown-body span.frame{display: block;overflow: hidden}.markdown-body span.frame>span{display: block;float: left;width: auto;padding: 7px;margin: 13px 0 0;overflow: hidden;border: 1px solid #ddd}.markdown-body span.frame span img{display: block;float: left}.markdown-body span.frame span span{display: block;padding: 5px 0 0;clear: both;color: #333}.markdown-body span.align-center{display: block;overflow: hidden;clear: both}.markdown-body span.align-center>span{display: block;margin: 13px auto 0;overflow: hidden;text-align: center}.markdown-body span.align-center span img{margin: 0 auto;text-align: center}.markdown-body span.align-right{display: block;overflow: hidden;clear: both}.markdown-body span.align-right>span{display: block;margin: 13px 0 0;overflow: hidden;text-align: right}.markdown-body span.align-right span img{margin: 0;text-align: right}.markdown-body span.float-left{display: block;float: left;margin-right: 13px;overflow: hidden}.markdown-body span.float-left span{margin: 13px 0 0}.markdown-body span.float-right{display: block;float: right;margin-left: 13px;overflow: hidden}.markdown-body span.float-right>span{display: block;margin: 13px auto 0;overflow: hidden;text-align: right}.markdown-body code,.markdown-body tt{padding: 0;padding-top: 0.2em;padding-bottom: 0.2em;margin: 0;font-size: 85%;background-color: rgba(0,0,0,0.04);border-radius: 3px}.markdown-body code:before,.markdown-body code:after,.markdown-body tt:before,.markdown-body tt:after{letter-spacing: -0.2em;content: "\00a0"}.markdown-body code br,.markdown-body tt br{display: none}.markdown-body del code{text-decoration: inherit}.markdown-body pre>code{padding: 0;margin: 0;font-size: 100%;word-break: normal;white-space: pre;background: transparent;border: 0}.markdown-body .highlight{margin-bottom: 16px}.markdown-body .highlight pre,.markdown-body pre{padding: 16px;overflow: auto;font-size: 85%;line-height: 1.45;background-color: #f7f7f7;border-radius: 3px}.markdown-body .highlight pre{margin-bottom: 0;word-break: normal}.markdown-body pre{word-wrap: normal}.markdown-body pre code,.markdown-body pre tt{display: inline;max-width: initial;padding: 0;margin: 0;overflow: initial;line-height: inherit;word-wrap: normal;background-color: transparent;border: 0}.markdown-body pre code:before,.markdown-body pre code:after,.markdown-body pre tt:before,.markdown-body pre tt:after{content: normal}.markdown-body kbd{display: inline-block;padding: 3px 5px;font-size: 11px;line-height: 10px;color: #555;vertical-align: middle;background-color: #fcfcfc;border: solid 1px #ccc;border-bottom-color: #bbb;border-radius: 3px;box-shadow: inset 0 -1px 0 #bbb}.codehilite{background: #ffffff}.codehilite .c{color: #999988;font-style: italic}.codehilite .err{color: #a61717;background-color: #e3d2d2}.codehilite .k{color: #000000;font-weight: bold}.codehilite .o{color: #000000;font-weight: bold}.codehilite .cm{color: #999988;font-style: italic}.codehilite .cp{color: #999999;font-weight: bold}.codehilite .c1{color: #999988;font-style: italic}.codehilite .cs{color: #999999;font-weight: bold;font-style: italic}.codehilite .gd{color: #000000;background-color: #ffdddd}.codehilite .gd .x{color: #000000;background-color: #ffaaaa}.codehilite .ge{color: #000000;font-style: italic}.codehilite .gr{color: #aa0000}.codehilite .gh{color: #999999}.codehilite .gi{color: #000000;background-color: #ddffdd}.codehilite .gi .x{color: #000000;background-color: #aaffaa}.codehilite .go{color: #888888}.codehilite .gp{color: #555555}.codehilite .gs{font-weight: bold}.codehilite .gu{color: #aaaaaa}.codehilite .gt{color: #aa0000}.codehilite .kc{color: #000000;font-weight: bold}.codehilite .kd{color: #000000;font-weight: bold}.codehilite .kp{color: #000000;font-weight: bold}.codehilite .kr{color: #000000;font-weight: bold}.codehilite .kt{color: #445588;font-weight: bold}.codehilite .m{color: #009999}.codehilite .s{color: #d14}.codehilite .na{color: #008080}.codehilite .nb{color: #0086B3}.codehilite .nc{color: #445588;font-weight: bold}.codehilite .no{color: #008080}.codehilite .ni{color: #800080}.codehilite .ne{color: #990000;font-weight: bold}.codehilite .nf{color: #990000;font-weight: bold}.codehilite .nn{color: #555555}.codehilite .nt{color: #000080}.codehilite .nv{color: #008080}.codehilite .ow{color: #000000;font-weight: bold}.codehilite .w{color: #bbbbbb}.codehilite .mf{color: #009999}.codehilite .mh{color: #009999}.codehilite .mi{color: #009999}.codehilite .mo{color: #009999}.codehilite .sb{color: #d14}.codehilite .sc{color: #d14}.codehilite .sd{color: #d14}.codehilite .s2{color: #d14}.codehilite .se{color: #d14}.codehilite .sh{color: #d14}.codehilite .si{color: #d14}.codehilite .sx{color: #d14}.codehilite .sr{color: #009926}.codehilite .s1{color: #d14}.codehilite .ss{color: #990073}.codehilite .bp{color: #999999}.codehilite .vc{color: #008080}.codehilite .vg{color: #008080}.codehilite .vi{color: #008080}.codehilite .il{color: #009999}
    </style>
    <style type="text/css">
      .markdown-body hr{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC")}
    </style>
  </head>
  <body>
    <div class="container">
      <div id="markup">
        <article id="content" class="markdown-body">
          <h2>DataAnalysis 读书笔记</h2>
<p>import pandas as pd;
import numpy as np;
from pandas import Series, DataFrame;
from numpy.random import randn;
from scipy import stats as stats;
import matplotlib.pyplot as plt;
import seaborn as sns;
logstart</p>
<p>0 更改数据类型</p>
<div class="codehilite"><pre>    <span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="c">#change</span>
    <span class="n">x</span><span class="o">.</span><span class="n">atype</span> <span class="c"># check</span>
    <span class="nb">int</span><span class="p">(</span><span class="s">&#39;str&#39;</span><span class="p">)</span>
    <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">string</span><span class="o">.</span><span class="n">atof</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="c"># 转换成浮点数</span>
</pre></div>


<p>1 设置小数点位数（格式化字符串）</p>
<div class="codehilite"><pre>    <span class="o">%</span><span class="n">x</span> <span class="s">&#39;</span><span class="si">%.2f</span><span class="s">%&#39;</span> <span class="c">#两位小数</span>
    <span class="n">x</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="n">format</span><span class="p">)</span>
</pre></div>


<p>2 排序</p>
<div class="codehilite"><pre>    <span class="n">obj</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="p">[])</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">order</span><span class="p">()</span> <span class="c">#缺失值会放在末尾</span>
</pre></div>


<p>3 排名</p>
<div class="codehilite"><pre>    <span class="n">obj</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">&#39;first|max|average&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="c">#axis=1 表示按行计算，0为按列，默认是0</span>
    <span class="c">#DataFrame里面相反1为列0为行</span>
</pre></div>


<p>4 Series &amp; DataFrame 选择数据</p>
<div class="codehilite"><pre>    <span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[])</span>
    <span class="c">#Series是DataFrame的子集</span>

    <span class="n">Series</span><span class="p">:</span> <span class="n">obj</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>

    <span class="n">DataFrame</span><span class="p">:</span> 
    <span class="n">obj</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="err">行</span><span class="p">,</span> <span class="err">列</span><span class="p">]</span> <span class="c">#[:, 0] 指选取第一列全部数据</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;echo&#39;</span><span class="p">,</span> <span class="s">&#39;echo5&#39;</span><span class="p">,</span> <span class="s">&#39;echo10&#39;</span><span class="p">]]</span>

    <span class="c">#列选择</span>
    <span class="n">df</span><span class="p">[</span><span class="s">&#39;book&#39;</span><span class="p">]</span>
    <span class="c">#行选择</span>
    <span class="n">df</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
    <span class="c">#只选一个数据</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">]</span>
    <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">]</span>

    <span class="c">#选择特定index和columns的数据</span>
    <span class="n">origin_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;Agg Origin&#39;</span><span class="p">,</span> <span class="s">&#39;echo5&#39;</span><span class="p">]</span>
    <span class="c">#选择多个列</span>
    <span class="n">origin_data</span> <span class="o">=</span> <span class="n">origin_data</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span> <span class="p">[</span><span class="s">&#39;ear&#39;</span><span class="p">,</span> <span class="s">&#39;ear5&#39;</span><span class="p">,</span> <span class="s">&#39;ear10&#39;</span><span class="p">,</span> <span class="s">&#39;ear15&#39;</span><span class="p">,</span> <span class="s">&#39;ear20&#39;</span><span class="p">,</span> <span class="s">&#39;echo&#39;</span><span class="p">,</span> <span class="s">&#39;turn&#39;</span><span class="p">,</span> <span class="s">&#39;turn5&#39;</span><span class="p">,</span> <span class="s">&#39;turn10&#39;</span><span class="p">,</span> <span class="s">&#39;turn15&#39;</span><span class="p">]]</span>
    <span class="c">#选择特定的行</span>
    <span class="c">indi_syl_df[indi_syl_df['emitter']=='L']['number']</span>
    <span class="c">#选择特定的行，多个条件选择</span>
    <span class="c">tran_df_transition = tran_df.loc[(tran_df['population'] == pl) & (tran_df['level'] == level)]['transition']</span>

    <span class="c">#插入新列</span>
    <span class="n">df</span><span class="p">[</span><span class="s">&#39;new&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

    <span class="c">#删除列或行</span>
    <span class="n">data_origin_between</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;echo_ln&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="c">#列</span>
    <span class="n">data_origin_between</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;echo10_ln&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="c">#行</span>
</pre></div>
<p>删除行或列</p>
div class="codehilite"><pre>    <span class="n">seq_all_df.drop(seq_all_df.index[ind], inplace=True)</span>
   
</pre></div>
        
<p>5 创建空值</p>
<div class="codehilite"><pre>    <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">skipna</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="c">#不跳过空值，默认跳过</span>
</pre></div>


<p>6 返回最大值或最小值的索引</p>
<div class="codehilite"><pre>    <span class="n">df</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
    <span class="n">df</span><span class="o">.</span><span class="n">idxmin</span><span class="p">()</span>
</pre></div>


<p>7 唯一值（去重）</p>
<div class="codehilite"><pre>    <span class="n">obj</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span> <span class="c">#计算各值出现的频率 #默认降序排列</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">isin</span><span class="p">()</span> <span class="c">#是否在集合中，或是其子集，可用于选取子集</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span> <span class="c">#空值</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">fillna</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">})</span> <span class="c">#用空值填充 #可以在不同列填充不同的值</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;all&#39;</span><span class="p">,</span> <span class="n">thresh</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="c">#过滤掉空值 #all表示全部为空才会过滤掉 #默认为行 #3表示全部都不为空</span>
</pre></div>


<p>8 将multiindex(多重索引)重新安排到一个DataFrame中，行和列表示原来的索引</p>
<div class="codehilite"><pre>    <span class="n">unstack</span><span class="p">()</span>
    <span class="n">stack</span><span class="p">()</span> <span class="c">#逆运算</span>
</pre></div>


<p>9 使用已有的列作为索引</p>
<div class="codehilite"><pre>    <span class="n">frame</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">],</span> <span class="n">drop</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="c">#多个列也可以 #原有的列也可以不删除</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span> <span class="c">#功能相反，将索引变成列</span>
    <span class="n">seq_all_df.reset_index(drop=True)</span><span class="c">#重设索引，并丢掉原来的索引</span>
</pre></div>


<p>10 windows下的type命令等于UNIX下的cat命令
11 读取数据</p>
<div class="codehilite"><pre>    <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;filepath&#39;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;NULL&#39;</span><span class="p">],</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="c">#跳过某些行</span>
    <span class="c">#填充缺失值</span>
    <span class="c">#只读取前5行</span>
    <span class="c">#逐块读取，每10行读取一次</span>
</pre></div>


<p>12 写入数据</p>
<div class="codehilite"><pre>    <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s">&#39;filepath&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">&#39;|&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s">&#39;NULL&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">|</span><span class="n">header</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="c">#设定分隔符</span>
    <span class="c">#空字符串标记值</span>
    <span class="c">#不输出行和列的标签</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;filepath&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">dialect</span><span class="o">=</span><span class="s">&#39;|&#39;</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">((</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">))</span>

    <span class="n">var_writer</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="s">&#39;filrpath&#39;</span><span class="p">)</span>
    <span class="n">var_df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">var_writer</span><span class="p">,</span> <span class="s">&#39;Sheet1&#39;</span><span class="p">)</span>
    <span class="n">var_writer</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>


<p>13 JSON</p>
<div class="codehilite"><pre>    <span class="kn">import</span> <span class="nn">json</span>
    <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">()</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">()</span> <span class="c">#obj-&gt;json</span>
</pre></div>


<p>14 读写其他格式
    XML、HDDF、HTML、EXCEL、Web Api</p>
<div class="codehilite"><pre>    <span class="n">xls_file</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s">&#39;data.xls&#39;</span><span class="p">)</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">xls_file</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;Sheet1&#39;</span><span class="p">)</span> <span class="c">#data -&gt; DataFrame</span>
</pre></div>


<p>15 数据库
    SQLite 、SQL Server、PostgreSQL、MySQL、MongoDB</p>
<p>16 合并数据集</p>
<div class="codehilite"><pre>    <span class="n">pandas</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span> <span class="c">#类似SQL数据库的连接操作 #也可以多键名连接on=[&#39;a&#39;, &#39;x&#39;]</span>
    <span class="c">#默认用共有的列名连接，也可以指定</span>
    <span class="n">pandas</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s">&#39;ID&#39;</span><span class="p">)</span> 
    <span class="c">#也可以分别指定要连接的列名</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;outer|inner|left|right&#39;</span><span class="p">)</span>
    <span class="c">#默认取交集，其他数据会舍去，可设置取并集，或以左右某侧为主合并</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">suffixes</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;_left&#39;</span><span class="p">,</span> <span class="s">&#39;_right&#39;</span><span class="p">))</span>
    <span class="c">#若两个表存在同名键值，合并时可以加后缀以区分</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>   
    <span class="c">#左侧用键名，右侧用索引名</span>

    <span class="n">left</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span> <span class="c">#另一种合并方式</span>

    <span class="n">pandas</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="s">&#39;inner&#39;</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span> 
    <span class="c"># 3个Series #按列 #取交集 #为结果添加层次化索引</span>
</pre></div>


<p>17 合并重叠数据</p>
<div class="codehilite"><pre>    <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="c">#if true a else b</span>
    <span class="n">S1</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span><span class="n">S2</span><span class="p">)</span> <span class="c">#另一个方式，可自动排序</span>
</pre></div>


<p>18 长格式旋转为宽格式</p>
<div class="codehilite"><pre>    <span class="n">pivoted</span> <span class="o">=</span> <span class="n">ldata</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="s">&#39;item&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">)</span>
    <span class="c">#转换为DataFrame格式了</span>
</pre></div>


<p>19 去除重复的行</p>
<div class="codehilite"><pre>    <span class="n">data</span><span class="o">.</span><span class="n">duplicates</span><span class="p">()</span>
    <span class="n">data</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s">&#39;k1&#39;</span><span class="p">,</span> <span class="s">&#39;k2&#39;</span><span class="p">],</span> <span class="n">take_last</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="c">#保留最后一个出现的，默认是保留第一个</span>
</pre></div>


<p>20 替换值</p>
<div class="codehilite"><pre>    <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span> <span class="c"># 传入列表或字典也可以</span>
    <span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c">#在原表中修改</span>
    <span class="n">data</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">},</span> <span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">})</span> <span class="c">#更改列名或行名，重命名</span>
</pre></div>


<p>21 离散化和面元划分</p>
<div class="codehilite"><pre>    <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">()</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">()</span> <span class="c">#按四分位数进行切割</span>
    <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">()</span> <span class="c">#返回一个有1和-1组成的数组，表示原始值的符号</span>
</pre></div>


<p>22 随机重排</p>
<div class="codehilite"><pre>    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">permutation</span><span class="p">()</span> <span class="c">#可以进行随机采样</span>
    <span class="n">df</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))[:</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">()</span>
</pre></div>


<p>23 字符串操作</p>
<div class="codehilite"><pre>    <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
    <span class="n">str1</span><span class="o">+</span><span class="n">str2</span>
    <span class="n">val</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span>
    <span class="n">val</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;;&#39;</span><span class="p">)</span>
    <span class="n">val</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">val</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;|&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;gmail&#39;</span><span class="p">)</span> <span class="c">#处理矢量化字符串，可以跳过NA值</span>
</pre></div>


<p>24 正则表达式</p>
<div class="codehilite"><pre>    <span class="kn">import</span> <span class="nn">re</span>
    <span class="n">regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;\s+&#39;</span><span class="p">)</span> <span class="c">#自己写正则 #提取字符串</span>
    <span class="s">r&#39;C:\x&#39;</span> <span class="c">#转义的两种方式</span>
    <span class="s">&#39;C:</span><span class="se">\\</span><span class="s">x&#39;</span>
    <span class="n">regex</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="c">#返回找到的第一个</span>
    <span class="n">regex</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="c">#返回全部</span>
    <span class="n">regex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="c">#返回找到第一个的开头部分</span>
    <span class="n">regex</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;new&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span> <span class="c">#将匹配到的替换为指定的字符串</span>
</pre></div>


<p>25 matplotlib</p>
<div class="codehilite"><pre>    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="o">|</span><span class="mi">2</span><span class="o">|</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">])</span> <span class="c">#折线图</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">()</span> <span class="c">#paint on the first figure</span>

    <span class="c">#调整间距</span>
    <span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

    <span class="c">#设置X轴刻度及名称</span>
    <span class="n">ticks</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">750</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;three&#39;</span><span class="p">,</span> <span class="s">&#39;four&#39;</span><span class="p">,</span> <span class="s">&#39;five&#39;</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s">&#39;small&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;stage&#39;</span><span class="p">)</span>

    <span class="c">#添加图例</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="s">&#39;k--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;book|_nolegend_&#39;</span><span class="p">)</span> <span class="c">#可以不添加图例</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">&#39;best&#39;</span><span class="p">)</span>

    <span class="c">#注解</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s">&#39;hello world!&#39;</span><span class="p">)</span> <span class="c">#xy表示添加位置的坐标</span>

    <span class="n">SEABORN作图</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="c">#线图</span>
    <span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>
</pre></div>


<p>26 Series.plot 参数</p>
<div class="codehilite"><pre>    <span class="c">#柱状图</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[],</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">stacked</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span> <span class="c">#stacked：堆积</span>

    <span class="c">#直方图</span>
    <span class="n">df</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span> 

    <span class="c">#密度图</span>
    <span class="c">#在直方图的基础上</span>
    <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">&#39;kde&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s">&quot;k--&quot;</span><span class="p">)</span>

    <span class="c">#散点图</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">trans_data</span><span class="p">[</span><span class="s">&#39;m1&#39;</span><span class="p">],</span> <span class="n">trans_data</span><span class="p">[</span><span class="s">&#39;unemp&#39;</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">scatter_matrix</span><span class="p">(</span><span class="n">trans_data</span><span class="p">,</span> <span class="n">diagonal</span><span class="o">=</span><span class="s">&#39;kde&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="c">#两两矩阵作图</span>
</pre></div>


<p>27 绘制地图</p>
<div class="codehilite"><pre>    <span class="c">#basemap 工具集</span>
    <span class="c">#海岸线、国家、道路可以直接绘制，遍历数据点，依次绘制到地图上</span>
</pre></div>


<p>28 统计相关的库</p>
<div class="codehilite"><pre>    <span class="c">#统计推断的包</span>
    <span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span> <span class="k">as</span> <span class="n">ss</span>
    <span class="c">#单样本T检验</span>
    <span class="n">ss</span><span class="o">.</span><span class="n">ttest_1samp</span><span class="p">(</span><span class="n">column</span><span class="o">|</span><span class="n">columns</span><span class="p">,</span> <span class="n">popmean</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span> <span class="c">#要统计的列或全部列，估计均值</span>
    <span class="c">#OUTPUT</span>
    <span class="p">(</span><span class="o">-</span><span class="mf">1.1281738488299586</span><span class="p">,</span> <span class="mf">0.26270472069109496</span><span class="p">)</span> <span class="c">#统计量， 双侧尾概率值（P值）</span>

    <span class="c">#可视化模块</span>
    <span class="kn">import</span> <span class="nn">matlibplot.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
    <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="c">#pandas模块中集成R的ggplot主题来美化图表</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">mpl_style</span> <span class="o">=</span> <span class="s">&#39;default&#39;</span>
    <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="c">#seaborn模块，该模块是一个统计数据可视化库</span>
    <span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">withs</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;default|pastel&#39;</span><span class="p">)</span> <span class="c">#箱图</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">widths</span><span class="o">=</span><span class="n">o</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;default|pastel&#39;</span><span class="p">)</span> <span class="c">#葫芦状箱图</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">rug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span> <span class="c"># 柱状图</span>

    <span class="k">with</span> <span class="n">sns</span><span class="o">.</span><span class="n">axes_style</span><span class="p">(</span><span class="s">&#39;white&#39;</span><span class="p">):</span> <span class="c">#有密度曲线的热图</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">column1</span><span class="p">,</span> <span class="n">column2</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s">&#39;kde&#39;</span><span class="p">)</span>

    <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="s">&quot;column name 1&quot;</span><span class="p">,</span> <span class="s">&quot;column name 2&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c">#有线性拟合的散点图</span>

    <span class="c">#调用R</span>
    <span class="kn">from</span> <span class="nn">rpy2</span> <span class="nn">improt</span> <span class="nn">robjects</span>
    <span class="n">r_dataFrame</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">convert_to_r_dataframe</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">robjects</span><span class="o">.</span><span class="n">r</span>
    <span class="n">r</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">r_df</span><span class="p">)</span>


    <span class="n">stats</span><span class="o">.</span><span class="n">normaltest</span><span class="p">()</span>
    <p>stats.normaltest(list) # list 包含全部分组的数据</p>
    <span class="c"># 默认假设是符合正态分布的</span>
    <span class="c"># P&gt;0.05 ：符合正态分布</span>

    <span class="n">stats</span><span class="o">.</span><span class="n">levene</span><span class="p">()</span> 
    <p>stats.levene(list1, list2...) # 每个list属于一个分组</p>
    <span class="c"># 默认齐次，即该检测方法假设数据是齐次的</span>
    <span class="c"># P&gt;0.05 ：方差齐次，可以使用ANOVA，否则使用非参数检验方法（但是在SPSS里面，方差不齐也可以使用ANOVA，但要选择方差不齐的分析方法如Tamhane&#39;s T2等等）</span>

    <span class="n">stats</span><span class="o">.</span><span class="n">f_oneway</span><span class="p">(</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2</span><span class="p">,</span> <span class="n">group3</span><span class="p">)</span>
    <span class="c"># 正态分布+方差齐次+样本独立</span>

    <span class="n">stats</span><span class="o">.</span><span class="n">kruskal</span><span class="p">(</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2</span><span class="p">,</span> <span class="n">group3</span><span class="p">)</span>
    <span class="c"># Kruskal-Wallis H-test</span>
    <span class="c"># 样本不符合正态分布或方差不齐时，使用该方法</span>
</pre></div>
    <p> 29 Miniconda3</p>
    <div class="codehilite">
      <pre>
      <p>
        <span class="kn">conda create -n andrew python=3.10</span>
        <span class="kn">conda env list</span>
        <span class="kn">conda activate andrew</span>
        <span class="kn">conda deactivate</span>
        <span class="kn">conda remove -n andrew</span>
        <span class="kn">conda install pandas</span>
        <span class="kn">jupyter notebook --notebook-dir='d:/下载'</span>

      </p></pre>
    </div>
        </article>
      </div>
    </div>
    <p style="text-align:center;"><a target="_blank" href="http://weibo.com/u/1736799387" title="张亢亢的新浪微博">@张亢亢Andrew</a></p>
  </body>
</html>
